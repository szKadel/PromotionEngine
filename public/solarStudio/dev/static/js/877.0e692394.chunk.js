"use strict";(self.webpackChunkbeup_hr=self.webpackChunkbeup_hr||[]).push([[877],{7301:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var r=n(8232),a=n(624),s=n(9230),i=n(919),o=n(1087),u=n(4165),c=n(5861),l=n(1413),d=n(9439),m=n(2791),f=n(1642),h=(n(5400),n(2426)),p=n.n(h),v=n(7627),y=function(e,t){return e===t},g=n(184),x=function(e){var t=e.i18n,n=e.filterState,r=(t.t,(new Date).getFullYear()),a=[r-1,r,r+1],s=(0,d.Z)(n,2),o=s[0],u=s[1],c=(0,m.useState)("G\u0142\xf3wny"),f=(0,d.Z)(c,2),h=(f[0],f[1],(0,m.useState)(null)),p=(0,d.Z)(h,2),v=(p[0],p[1],function(e,t){for(var n=[],r=(0,d.Z)(t,2),a=r[0],s=r[1],o=new Intl.DateTimeFormat(e.resolvedLanguage,{month:"short"}),u=new Date,c=function(e){u.setMonth(e);var t=o.formatToParts(u).find((function(e){return"month"===e.type})).value;n.push((0,m.createElement)(i.z,(0,l.Z)((0,l.Z)({label:t,className:"imeLineCalendarFilter_month_button"},function(e,t){return e===t?{severity:"primary",outlined:!0}:{severity:"secondary",text:!0}}(e,a.jsMonthId)),{},{key:e,onClick:function(){return s((function(t){return(0,l.Z)((0,l.Z)({},t),{},{jsMonthId:e})}))}})))},f=0;f<12;f++)c(f);return n}(t,n));return(0,g.jsx)("div",{className:"TimeLineCalendarFilter",children:(0,g.jsxs)("div",{className:"TimeLineCalendarFilter_row",children:[(0,g.jsxs)("div",{className:"TimeLineCalendarFilter_years",children:[(0,g.jsx)(i.z,(0,l.Z)((0,l.Z)({label:a[0]},y(a[0],o.year)?{}:{severity:"secondary",text:!0}),{},{onClick:function(){return u((function(e){return(0,l.Z)((0,l.Z)({},e),{},{year:a[0]})}))}})),(0,g.jsx)(i.z,(0,l.Z)((0,l.Z)({label:a[1]},y(a[1],o.year)?{}:{severity:"secondary",text:!0}),{},{onClick:function(){return u((function(e){return(0,l.Z)((0,l.Z)({},e),{},{year:a[1]})}))}})),(0,g.jsx)(i.z,(0,l.Z)((0,l.Z)({label:a[2]},y(a[2],o.year)?{}:{severity:"secondary",text:!0}),{},{onClick:function(){return u((function(e){return(0,l.Z)((0,l.Z)({},e),{},{year:a[2]})}))}}))]}),(0,g.jsx)("div",{className:"TimeLineCalendarFilter_months",children:v})]})})},j=function(e){var t=e.i18n,n=e.filterState,r=e.children,a=e.employeesGroups,s=void 0===a?[]:a,i=e.vacationRequestsItems,o=void 0===i?[]:i,u=t.t,c=(0,d.Z)(n,1)[0];p()(),p()().add(3,"day"),p()().add(-.5,"day"),p()().add(2.5,"day");console.log(o);var h=(0,m.useMemo)((function(){return window.getComputedStyle(document.documentElement).getPropertyValue("--calendarHorizontalLineHeight")}),[]),v=(0,m.useMemo)((function(){return Number(h.slice(0,-2))}),[]),y=function(e,t){var n=11===t?0:t+1,r=11===t?e+1:e;return{start:new Date(e,t,0),end:new Date(r,n,0)}}(c.year,c.jsMonthId);return(0,g.jsxs)("div",{className:"TimeLineCalendar_container",children:[(0,g.jsx)(x,{i18n:t,filterState:n}),r||(0,g.jsxs)(f.ZP,{groups:s,items:o,defaultTimeStart:y.start,defaultTimeEnd:y.end,lineHeight:v,canMove:!1,canResize:!1,children:[(0,g.jsx)(f.AY,{children:(0,g.jsx)(f.Lw,{})}),(0,g.jsxs)(f.or,{children:[(0,g.jsx)(f.$l,{children:function(e){var t=e.getRootProps;return(0,g.jsx)("div",(0,l.Z)((0,l.Z)({className:"rct-left-group-header"},t()),{},{children:u("repeatedWords.employee")}))}}),(0,g.jsx)(f.J4,{className:"rct-main-time-header"})]})]})]})},Z=n(5554),w=n(5942),b=n(6118),R=n(4679),_=function(e){var t=e.i18n,n=e.currentUser,r=new Date,a=(0,m.useState)({year:r.getFullYear(),jsMonthId:r.getMonth()}),s=(0,m.useRef)(!0),i=(0,m.useState)({status:"loading"}),o=(0,d.Z)(i,2),f=o[0],h=o[1],p=(0,d.Z)(a,1)[0];if((0,m.useEffect)((function(){s.current?s.current=!1:(h((function(e){return(0,l.Z)((0,l.Z)({},e),{},{status:"loading"})})),setTimeout((function(){return h((function(e){return(0,l.Z)((0,l.Z)({},e),{},{status:"success"})}))}),300))}),[p]),(0,m.useEffect)((function(){n&&(0,c.Z)((0,u.Z)().mark((function e(){var t,r,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.hi.v8.get({itemsPerPage:R.y});case 2:if(!(t=e.sent).error&&!t.warning){e.next=6;break}return h({status:"error",data:t.error||t.warning}),e.abrupt("return");case 6:return e.next=8,n.roles.includes("ROLE_ADMIN")?b.hi.gt.get({itemsPerPage:R.y}):null!==n&&void 0!==n&&n.employee?b.hi.gt.getById(n.employee.id):b.hi.gt.get({itemsPerPage:R.y});case 8:if(!(r=e.sent).error&&!r.warning){e.next=12;break}return h({status:"error",data:r.error||r.warning}),e.abrupt("return");case 12:return e.next=14,b.hi.XS.get({itemsPerPage:R.y});case 14:if(!(a=e.sent).error&&!a.warning){e.next=18;break}return h({status:"error",data:a.error||a.warning}),e.abrupt("return");case 18:h({status:"success",data:{employeesResponse:r,vacationRequestsResponse:a,vacationTypesResponse:t}});case 19:case"end":return e.stop()}}),e)})))()}),[n]),"loading"===f.status)return(0,g.jsx)(j,{i18n:t,filterState:a,children:(0,g.jsx)(Z.g,{})});if("error"===f.status)return(0,g.jsx)(j,{i18n:t,filterState:a,children:(0,g.jsx)(w.j,{error:f.data})});if("success"===f.status){var y=function(e){var t=[];return e.forEach((function(e){t.push({id:e["@id"],title:"".concat(e.name," ").concat(e.surname)})})),t}(n.roles.includes("ROLE_ADMIN")?f.data.employeesResponse["hydra:member"]:[f.data.employeesResponse]),x=function(e,t){var n=[];return e.forEach((function(e){n.push({id:e["@id"],group:e.employee["@id"],title:(0,v.at)(e.type["@id"],t).name,start_time:new Date(e.dateFrom),end_time:new Date(e.dateTo)})})),n}(f.data.vacationRequestsResponse["hydra:member"],f.data.vacationTypesResponse["hydra:member"]);return(0,g.jsx)(j,{i18n:t,filterState:a,employeesGroups:y,vacationRequestsItems:x})}},C=n(8934),N=function(e){var t=e.currentUser,n=(0,s.$G)().i18n,u=n.t;return(0,g.jsxs)("main",{className:"page vacationsCalendar_page container_local",children:[(0,g.jsx)(r.m,{title:u("menu.subMenuVacations.menuItemCalendar"),children:(0,g.jsxs)("div",{className:"vacationsCalendar_page_action_buttons_container",children:[(0,g.jsx)(o.rU,{to:"".concat(C.S,"/vacations/createRequest"),children:(0,g.jsx)(i.z,{label:"+ ".concat(u("pages.vacations.calendar.actionButtonsContainer.addPlanRequestButton")),outlined:!0})}),(0,g.jsx)(o.rU,{to:"".concat(C.S,"/vacations/createRequest"),children:(0,g.jsx)(i.z,{label:"+ ".concat(u("pages.vacations.listOfRequests.addNewRequestButton")),outlined:!0})})]})}),(0,g.jsx)("div",{className:"page_content",children:(0,g.jsx)(_,{i18n:n,currentUser:t})}),(0,g.jsx)(a.W,{})]})}},5554:function(e,t,n){n.d(t,{g:function(){return r.g}});var r=n(2249)}}]);
//# sourceMappingURL=877.0e692394.chunk.js.map